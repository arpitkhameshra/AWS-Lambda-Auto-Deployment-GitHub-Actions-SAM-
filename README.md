# AWS-Lambda-Auto-Deployment-GitHub-Actions-SAM-
This repository hosts multiple Node.js-based AWS Lambda functions — each representing an independent microservice. The entire deployment process is fully automated using GitHub Actions, AWS SAM, and a Python automation script that dynamically handles template generation, layer updates, and function deployments.

## 📁 Repository Structure
```
── .github
│   └── workflows
│       └── dev.yml                   # GitHub Actions auto-deploy workflow
├── functions                         # All Lambda functions
│   ├── excel-gen-using-template      # Function 1 - Excel Audit Report Generator
│   │   ├── layers.txt                # Lists layers used by this function
│   │   └── src/
│   ├── gst-service/                  # Function 2 - GST Management Service
│   ├── parser-service/               # Function 3 - Financial Parser
│   ├── pdf-to-s3/                    # Function 4 - PDF Converter & Uploader
│   ├── pdfReader                     # Function 5 - PDF Reader & Data Extractor
│   │   ├── README.md
│   │   ├── layers.txt
│   │   └── src
│   │       └── index.js
│   └── shorten_url/                  # Function 6 - URL Shortener Service
├── layers                            # Centralized layers for dependencies  
│   ├── @langchain
│   │   └── nodejs
│   │       └── package.json
│   ├── aws-sdk-2.1520.0
│   │   └── nodejs
│   │       └── package.json
│   ├── moment-2
│   │   └── nodejs
│   │       └── package.json
├── scripts                      
│   └── generate_sam_template.py      # Auto-script to build and deploy updated functions
└── template-base.yml                 # Base SAM template
└── template.yml                      # Auto-generated by script (DO NOT EDIT)
```

## ⚙️ How It Works (Fully Automated Deployment) 
This setup is zero-touch for developers — just push your code and everything happens automatically.

# 🔁 End-to-End Workflow
**1. Developer makes code changes:**
   
   - Update or add logic inside any function under ``` functions/<function-name>/src/ ```
   - If new dependencies are needed, follow the “Layer Management” section below
   - Commit and push to the branch (e.g., ```dev``` or ```main```)

**2. GitHub Actions detects the change:**

   - Workflow (```dev.yml```) automatically triggers on code push
   - No manual run or approval is required

**3. Python automation script runs:**

   - Scans the ```functions/``` directory for modified Lambda functions
   - Reads each function’s ```layers.txt``` to identify which layers it depends on
   - Auto-generates an updated ```template.yml``` from ```template-base.yml```
   - Updates any new or modified layers inside ```layers/```
   - Deploys only the **changed Lambda functions** to AWS

**4. Deployment completed:** 
    
   - The Lambda function(s) and corresponding layers are automatically updated in AWS
   - You can verify the success status under the Actions tab in GitHub


## 🧱 Layer Management (Simplified)
All shared dependencies are stored in the ```layers/``` folder. Each layer has its own directory and ```package.json``` file.

** ➕ Adding a New Layer**
  1. Create a new folder inside ```layers/```:
  ```
  layers/<new-layer-name>/nodejs/package.json
   ```

  2. Add required dependencies inside the ```package.json```.
  3. In the target Lambda function’s ```layers.txt```, add the layer name:
  ```
    <new-layer-name>
  ```
  4. Push your changes — the system will automatically:
    - Create and deploy the new layer
    - Attach it to the relevant function

No manual steps required.

##🔄 Updating Existing Layer Dependencies

   - Just update the dependencies inside:
     ```
     layers/<existing-layer-name>/nodejs/package.json
     ```
   - Push your code — the workflow will automatically detect the update and redeploy the affected Lambda functions.

##🧩 Function Layer Mapping (Example)
Each Lambda function has a ```layers.txt``` file that declares which layers it uses.

Example ```(functions/gst-service/layers.txt)```:
```
aws-sdk-2.1520.0
SecretManagerModule-2
moment-2
```
When you push code:
   - The script reads these entries
   - Automatically attaches corresponding layers during deployment

 **📄 Notes **

   - Developers do not need to run any commands manually — no SAM CLI or AWS CLI execution required.
   - The **Python script + GitHub Actions** handle everything automatically.
   - The repository is designed for continuous deployment and layer reuse across multiple functions.
   - Always keep ```template-base.yml``` as the master definition; ```template.yml``` is auto-generated.

   **In short:**
      - 🧑‍💻 Developers just **write code and push changes.**
      - 🤖 The system automatically **builds, updates layers, regenerates templates, and deploys** to AWS.


